{% extends 'base.html' %}
{% block title %}@{{ user.username }} ‚Äî MySocial{% endblock %}

{% block body %}
<div class="app-container">

  <aside class="sidebar-left">
    <div class="sidebar-logo">MySocial</div>
    <a href="/" class="nav-item"><span class="nav-icon">üè†</span> –°—Ç—Ä—ñ—á–∫–∞</a>
    <a href="/search" class="nav-item"><span class="nav-icon">üîç</span> –ü–æ—à—É–∫</a>
    <a href="/notifications" class="nav-item"><span class="nav-icon">üîî</span> –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è<span class="nav-badge" data-notif>0</span></a>
    <a href="/profile/{{ session.username }}" class="nav-item active"><span class="nav-icon">üë§</span> –ü—Ä–æ—Ñ—ñ–ª—å</a>
    <button class="sidebar-post-btn" onclick="openModal('modal-post')">+ –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ—Å—Ç</button>
    <a href="/profile/{{ session.username }}" class="sidebar-user">
      <div class="avatar avatar-sm" style="background:{{ session.get('accent','#6366f1') }}">{{ session.username[0].upper() }}</div>
      <div class="sidebar-user-info">
        <div class="sidebar-username">{{ session.username }}</div>
      </div>
    </a>
  </aside>

  <main class="main-feed">

    <div class="top-bar">
      <a href="/" class="icon-btn">‚Üê</a>
      <div style="font-weight:700;">@{{ user.username }}</div>
      <div style="width:36px;"></div>
    </div>

    <div class="profile-header">
      <div class="profile-top">
        <div class="avatar avatar-xl" style="background:{{ user.avatar_color }}">
          {{ user.username[0].upper() }}
        </div>
        <div class="profile-stats">
          <div class="profile-stat">
            <div class="profile-stat-value">{{ posts|length }}</div>
            <div class="profile-stat-label">–ü–æ—Å—Ç—ñ–≤</div>
          </div>
          <div class="profile-stat">
            <div class="profile-stat-value">{{ followers_count }}</div>
            <div class="profile-stat-label">–ß–∏—Ç–∞—á—ñ–≤</div>
          </div>
          <div class="profile-stat">
            <div class="profile-stat-value">{{ following_count }}</div>
            <div class="profile-stat-label">–ß–∏—Ç–∞—î</div>
          </div>
        </div>
      </div>

      <div class="profile-bio-section">
        <div class="profile-fullname">{{ user.username }}</div>
        {% if user.bio %}
          <div class="profile-bio">{{ user.bio }}</div>
        {% endif %}
      </div>

      {% if session.user_id == user.id %}
        <a href="/profile/{{ user.username }}/edit" class="btn-edit">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</a>
      {% else %}
        <form action="/follow/{{ user.id }}" method="POST">
          <button type="submit" class="btn-follow follow-btn-ajax {% if is_following %}following{% endif %}"
                  data-user-id="{{ user.id }}">
            {% if is_following %}–ü—ñ–¥–ø–∏—Å–∞–Ω–∏–π{% else %}–ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—å{% endif %}
          </button>
        </form>
      {% endif %}
    </div>

    <div class="divider"></div>

    {% if not posts %}
      <div class="empty-state">
        <div class="empty-icon">üìù</div>
        <div class="empty-text">–ù–µ–º–∞—î –ø–æ—Å—Ç—ñ–≤</div>
        <div class="empty-sub">–ü–æ–∫–∏ —Ç—É—Ç –Ω—ñ—á–æ–≥–æ –Ω–µ–º–∞—î</div>
      </div>
    {% else %}
      <div class="profile-grid">
        {% for post in posts %}
          <div class="profile-grid-item">
            <span style="font-size:1.5rem;">üìù</span>
            <div class="profile-grid-text">{{ post.content[:60] }}{% if post.content|length > 60 %}...{% endif %}</div>
          </div>
        {% endfor %}
      </div>
    {% endif %}

  </main>

  <aside class="sidebar-right"></aside>
</div>

<nav class="bottom-nav">
  <a href="/" class="bottom-nav-item"><span class="bnav-icon">üè†</span><span>–°—Ç—Ä—ñ—á–∫–∞</span></a>
  <a href="/search" class="bottom-nav-item"><span class="bnav-icon">üîç</span><span>–ü–æ—à—É–∫</span></a>
  <div class="bottom-nav-post"><button class="bottom-nav-post-btn" onclick="openModal('modal-post')">Ôºã</button></div>
  <a href="/notifications" class="bottom-nav-item"><span class="bnav-icon">üîî</span><span>–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è</span><span class="bnav-badge" data-notif></span></a>
  <a href="/profile/{{ session.username }}" class="bottom-nav-item active"><span class="bnav-icon">üë§</span><span>–ü—Ä–æ—Ñ—ñ–ª—å</span></a>
</nav>
{% endblock %}